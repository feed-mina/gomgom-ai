{% load static %}
<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>입맛테스트</title>
    <link rel="stylesheet" href="{% static 'css/start.css' %}">
    <meta name = "viewport" content="width=device-width, initial-scale=1.0">
</head>
<body>
    <header>
        <a id="header_link" href="{% url 'main' %}">
            <img src="{% static 'image/logo.png' %}" alt="logo" style="width:8vw; height:7vh; max-width:50px; max-height:80px;">
            <span id="header_text">&nbsp;CLICK YOUR TASTE!</span>
        </a>

    </header>
    
    <main>
        <section id = "content">
            <div class="main">
                <div class = "title">
                    <h2 class="title_text">입맛 테스트</h2>
                </div>
                <div class="Box">
                    <img src="{% static 'image/elice_chef_rabbit_1.png' %}" alt="rabbit" id="start_rabit"  >
                </div>

                <!-- templates/start.html -->
                <h1>🐰 입맛 테스트에 오신 걸 환영합니다!</h1>
                <p id="save_text"><strong>입력된 텍스트: {{ text }}</strong></p>  <!-- 텍스트 출력 -->
                <button class="button" onclick="goNextQuestion()">다음으로</button>
            </div>
        </section> 
    </main>
    <footer></footer>
    <script>

        // 'text'를 URL 파라미터에서 받기
        const urlParams = new URLSearchParams(window.location.search);
        const text = urlParams.get('text');  // URL 파라미터에서 'text' 값 가져오기
        console.log(text);  // 콘솔에서 값 확인하기
        window.addEventListener("DOMContentLoaded", () => {
            const params = new URLSearchParams(window.location.search);
            const inputText = decodeURIComponent(params.get("text") || '');
            const lat = params.get("lat");
            const lng = params.get("lng");

            console.log("⭐ 입력값:", inputText);
            console.log("📍 위도(lat):", lat);
            console.log("📍 경도(lng):", lng);

            // 테스트: 비어 있으면 알려주기
            if (!lat || !lng) {
                console.log("📍 ⚠️ 위치 정보가 없습니다");
            }
        });

        function goNextQuestion() {
                // 결과로 이동
                const urlParams = new URLSearchParams(window.location.search);
                const text = urlParams.get('text');
                console.log(text);  // 콘솔에서 확인

                const lat = urlParams.get('lat');
                const lng = urlParams.get('lng');
                // text 값도 URL로 넘기기
                window.location.href = `/test/?text=${encodeURIComponent(text)}&lat=${lat}&lng=${lng}`;

        }

    </script>


</body>
</html>