{% load static %}
<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>ì…ë§›í…ŒìŠ¤íŠ¸</title>
    <link rel="stylesheet" href="{% static 'css/start.css' %}">
    <meta name = "viewport" content="width=device-width, initial-scale=1.0">
</head>
<body>
    <header>
        <a id="header_link" href="{% url 'main' %}">
            <img src="{% static 'image/logo.png' %}" alt="logo" style="width:8vw; height:7vh; max-width:50px; max-height:80px;">
            <span id="header_text">&nbsp;CLICK YOUR TASTE!</span>
        </a>

    </header>
    
    <main>
        <section id = "content">
            <div class="main">
                <div class = "title">
                    <h2 class="title_text">ì…ë§› í…ŒìŠ¤íŠ¸</h2>
                </div>
                <div class="Box">
                    <img src="{% static 'image/elice_chef_rabbit_1.png' %}" alt="rabbit" id="start_rabit"  >
                </div>

                <!-- templates/start.html -->
                <h1>ğŸ° ì…ë§› í…ŒìŠ¤íŠ¸ì— ì˜¤ì‹  ê±¸ í™˜ì˜í•©ë‹ˆë‹¤!</h1>
                <p id="save_text"><strong>ì…ë ¥ëœ í…ìŠ¤íŠ¸: {{ text }}</strong></p>  <!-- í…ìŠ¤íŠ¸ ì¶œë ¥ -->
                <button class="button" onclick="goNextQuestion()">ë‹¤ìŒìœ¼ë¡œ</button>
            </div>
        </section> 
    </main>
    <footer></footer>
    <script>

        // 'text'ë¥¼ URL íŒŒë¼ë¯¸í„°ì—ì„œ ë°›ê¸°
        const urlParams = new URLSearchParams(window.location.search);
        const text = urlParams.get('text');  // URL íŒŒë¼ë¯¸í„°ì—ì„œ 'text' ê°’ ê°€ì ¸ì˜¤ê¸°
        console.log(text);  // ì½˜ì†”ì—ì„œ ê°’ í™•ì¸í•˜ê¸°
        window.addEventListener("DOMContentLoaded", () => {
            const params = new URLSearchParams(window.location.search);
            const inputText = decodeURIComponent(params.get("text") || '');
            const lat = params.get("lat");
            const lng = params.get("lng");

            console.log("â­ ì…ë ¥ê°’:", inputText);
            console.log("ğŸ“ ìœ„ë„(lat):", lat);
            console.log("ğŸ“ ê²½ë„(lng):", lng);

            // í…ŒìŠ¤íŠ¸: ë¹„ì–´ ìˆìœ¼ë©´ ì•Œë ¤ì£¼ê¸°
            if (!lat || !lng) {
                console.log("ğŸ“ âš ï¸ ìœ„ì¹˜ ì •ë³´ê°€ ì—†ìŠµë‹ˆë‹¤");
            }
        });

        function goNextQuestion() {
                // ê²°ê³¼ë¡œ ì´ë™
                const urlParams = new URLSearchParams(window.location.search);
                const text = urlParams.get('text');
                console.log(text);  // ì½˜ì†”ì—ì„œ í™•ì¸

                const lat = urlParams.get('lat');
                const lng = urlParams.get('lng');
                // text ê°’ë„ URLë¡œ ë„˜ê¸°ê¸°
                window.location.href = `/test/?text=${encodeURIComponent(text)}&lat=${lat}&lng=${lng}`;

        }

    </script>


</body>
</html>