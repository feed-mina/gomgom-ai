# ğŸ› ï¸ ì„œë²„ê°œë°œì¼ì§€: mindevprofile.kr Django + WordPress í†µí•© (2025.04.20~04.21)

**ë‚ ì§œ:** 2025-04-21
**ëª©í‘œ:** DjangoëŠ” `/`, WordPressëŠ” `/blog/`ë¡œ ë™ì‹œì— ì„œë¹„ìŠ¤ë˜ë„ë¡ êµ¬ì„±
**ì„œë²„í™˜ê²½:** EC2 + Nginx + Django + WordPress + MySQL + PHP-FPM
 1. ì„œë²„ êµ¬ì„± ëª©í‘œ

ë©”ì¸ í˜ì´ì§€ /ëŠ” Django ì„œë¹„ìŠ¤ ì—°ê²°

ë¸”ë¡œê·¸ /blog/ëŠ” WordPress ì—°ê²°

SSL ì¸ì¦ì„œ(Let's Encrypt), Nginx ë¦¬ë²„ìŠ¤ í”„ë¡ì‹œ, Gunicorn ì—°ë™

ì‹œìŠ¤í…œ ì •ë³´

EC2 Ubuntu 22.04

Django + Gunicorn + Nginx

WordPress + PHP 8.3 + MariaDB (MySQL)

ë„ë©”ì¸: https://mindevprofile.kr

---

## ğŸ“Œ ê¸°ì¡´ ìƒí™©ê³¼ ë¬¸ì œì 
- Django í”„ë¡œì íŠ¸ëŠ” ì´ë¯¸ `/` ë£¨íŠ¸ì—ì„œ ìš´ì˜ ì¤‘ (`gunicorn` + `nginx` í”„ë¡ì‹œ).
- WordPressë¥¼ `/blog/` í•˜ìœ„ ê²½ë¡œì— ì—°ê²°í•˜ë ¤ê³  í–ˆì§€ë§Œ, Djangoê°€ ëª¨ë“  URLì„ ê°€ë¡œì±„ë©´ì„œ `/blog/wp-login.php` ë“± ì ‘ì† ì‹œ **Django 404 ì˜¤ë¥˜** ë°œìƒ.
- `.htaccess`ê°€ Nginxì—ì„œ ë¬´ì‹œë˜ê¸° ë•Œë¬¸ì— Apacheì²˜ëŸ¼ ìë™ ë¦¬ë””ë ‰ì…˜ë˜ì§€ ì•ŠìŒ.

---

## ğŸ§© 2. Nginx ì„¤ì • ì „ëµ
**ğŸ¯ í•µì‹¬ ë¶„ê¸° ì „ëµ:** `/blog/` ê²½ë¡œëŠ” WordPressì— ë„˜ê¸°ê³ , ë‚˜ë¨¸ì§€ëŠ” Djangoë¡œ ì²˜ë¦¬

```nginx
location /blog/ {
    alias /var/www/html/wordpress/;
    index index.php index.html;
    try_files $uri $uri/ /index.php?$args;

    location ~ \.php$ {
        include snippets/fastcgi-php.conf;
        fastcgi_pass unix:/run/php/php8.3-fpm.sock;
        fastcgi_param SCRIPT_FILENAME $request_filename;
    }
}
location / {
    proxy_pass http://127.0.0.1:8000;
    proxy_set_header Host $host;
    proxy_set_header X-Real-IP $remote_addr;
    proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
    proxy_set_header X-Forwarded-Proto $scheme;
}
```

---

## âš™ï¸ 3. ì£¼ìš” ì„¤ì • ê²½ë¡œ ì •ë³´

   ì„¤ì • í•­ëª©

   ê²½ë¡œ

   Nginx ì„¤ì •

   /etc/nginx/sites-available/default

   WordPress ê²½ë¡œ

   /var/www/html/wordpress

   Django í”„ë¡œì íŠ¸

   /home/ubuntu/gomgom-ai

   ê°€ìƒí™˜ê²½

   /home/ubuntu/venv
---

##
âš ï¸ 4. ë°œìƒí•œ ì˜¤ë¥˜ ë° í•´ê²° ê¸°ë¡

4-1. HTTPS ì ‘ì† ì‹œ ERR_CONNECTION_REFUSED

ğŸ” ì›ì¸: nginxê°€ 443 í¬íŠ¸ë¥¼ ì—´ì§€ ì•ŠìŒ, ì¸ì¦ì„œ ë¯¸ì§€ì •

âœ… í•´ê²°: /etc/nginx/sites-available/defaultì—ì„œ listen 443 ssl; ì„¤ì • ë° ì¸ì¦ì„œ ê²½ë¡œ ì¶”ê°€

4-2. 403 Forbidden ì˜¤ë¥˜ (/blog/ ê²½ë¡œ)

ğŸ” ì›ì¸: Nginxì—ì„œ alias ê²½ë¡œ ê°€ìš´ë° ê¶Œí•œ ë¬¸ì œ ë˜ëŠ” ì˜ëª»ëœ ì„¤ì •

âœ… í•´ê²°:

location /blog/ {
    alias /var/www/html/wordpress/;
    index index.php;
    try_files $uri $uri/ /index.php?$args;
    location ~ \.php$ {
        include snippets/fastcgi-php.conf;
        fastcgi_pass unix:/run/php/php8.3-fpm.sock;
        fastcgi_param SCRIPT_FILENAME $request_filename;
    }
}

4-3. WordPress ë¡œê·¸ì¸ í›„ 404 ë°œìƒ (https://mindevprofile.kr/wp-login.php)

ğŸ” ì›ì¸: ê¸°ë³¸ ë£¨íŠ¸(/)ìš”ì²­ì€ Djangoê°€ ì²˜ë¦¬ â†’ WordPress ê²½ë¡œê°€ /blog/ ì•„ë˜ë¡œ ê°€ì•¼í•¨

âœ… í•´ê²°:

WordPress ë¡œê·¸ì¸ ê²½ë¡œëŠ” /blog/wp-login.phpë¡œ ì ‘ê·¼

Djangoì˜ / ê²½ë¡œì™€ WordPressì˜ /blog/ë¥¼ ëª…í™•íˆ ë‚˜ëˆ„ê¸°

4-4. Nginx ì„¤ì • ì¤‘ conflicting server name ê²½ê³ 

ğŸ” ì›ì¸: ë™ì¼í•œ server_nameì„ ì—¬ëŸ¬ ì„œë²„ ë¸”ë¡ì—ì„œ ì¤‘ë³µ ì„¤ì •

4-5. Django ì‹¤í–‰ í›„ ModuleNotFoundError: No module named 'django'

ğŸ” ì›ì¸: ê°€ìƒí™˜ê²½ ë¯¸í™œì„±í™” or Django ë¯¸ì„¤ì¹˜

âœ… í•´ê²°:

source venv/bin/activate
pip install django

4-6. gunicorn ì‹¤í–‰ì€ ë˜ì§€ë§Œ Django 404 ë°œìƒ

ğŸ” ì›ì¸: ALLOWED_HOSTS ëˆ„ë¥´ê°€ or proxy_pass ë¯¸ì—¬ë¶€

âœ… í•´ê²°:

ALLOWED_HOSTS = ['mindevprofile.kr', 'www.mindevprofile.kr']

nginx location /ì— proxy_pass ì„¤ì • í™•ì¸

 4-7.  ì´ì „ ì„¤ì •í•œ DB ê³„ì • ì •ë³´ ìŠìŒ

âœ… í•´ê²°:

ìƒˆë¡œìš´ ì‚¬ìš©ì ìƒì„± ë° ê¶Œí•œ ë¶€ì—¬

CREATE USER 'wpuser'@'localhost' IDENTIFIED BY 'ë¹„ë°€ë²ˆí˜¸';
GRANT ALL PRIVILEGES ON wordpress.* TO 'wpuser'@'localhost';
FLUSH PRIVILEGES;

wp-config.phpì— DB ì •ë³´ ìˆ˜ì •


ğŸ“¦ 4. WordPress ì„¤ì¹˜ ì§„í–‰
- ê¸°ì¡´ì— `wordpress` DBê°€ ì¡´ì¬í•˜ì—¬ â€œì´ë¯¸ ì„¤ì¹˜ë¨â€ ë©”ì‹œì§€ í™•ì¸ë¨.
- ë¡œê·¸ì¸ í™”ë©´ì€ `/blog/wp-login.php`ì—ì„œ ì •ìƒ ì¶œë ¥ë¨.
- ê´€ë¦¬ì ëŒ€ì‹œë³´ë“œë¡œ ì´ë™ ì„±ê³µ í›„, Djangoì™€ WordPressê°€ ë¶„ë¦¬ë˜ì—ˆëŠ”ì§€ í™•ì¸ ì™„ë£Œ.

---

## âœ… ìµœì¢… í™•ì¸
- `https://mindevprofile.kr/` â†’ Django í™ˆí™”ë©´ (`Hello, Gomgom!`)
- `https://mindevprofile.kr/blog/` â†’ WordPress ë¸”ë¡œê·¸ í™”ë©´
- `https://mindevprofile.kr/blog/wp-login.php` â†’ ë¡œê·¸ì¸ ì„±ê³µ
- `.php` íŒŒì¼ ìš”ì²­ì€ PHP-FPMì—ì„œ ì²˜ë¦¬, ë‚˜ë¨¸ì§€ëŠ” Django ì²˜ë¦¬

ğŸ“Œ ë§ˆë¬´ë¦¬ ë©”ëª¨

Nginxì˜ alias vs root ì°¨ì´ ì •í™•íˆ ì´í•´í•˜ê¸°

location /blog/ì€ Â»  (alias)ë§ˆì§€ë§‰ì— â€œ/â€ê¹Œì§€ í¬í•¨í•´ì•¼ alias ì •ìƒ ì‘ë™

