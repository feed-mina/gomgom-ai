
# ğŸ› ï¸ ì„œë²„ê°œë°œì¼ì§€: mindevprofile.kr Django + WordPress í†µí•©

**ğŸ“… ë‚ ì§œ:** 2025-04-20 ~ 2025-04-21  
**ğŸ¯ ëª©í‘œ:** DjangoëŠ” `/`, WordPressëŠ” `/blog/` ê²½ë¡œë¡œ ê°ê° ì„œë¹„ìŠ¤ë˜ë„ë¡ êµ¬ì„±  
**ğŸ–¥ï¸ ì„œë²„ í™˜ê²½:** EC2 + Nginx + Django + WordPress + MySQL + PHP-FPM

---

## 1ï¸âƒ£ ì„œë²„ êµ¬ì„± ëª©í‘œ

- ë©”ì¸ í˜ì´ì§€ `/` ğŸ‘‰ **Django**
- ë¸”ë¡œê·¸ `/blog/` ğŸ‘‰ **WordPress**
- SSL ì¸ì¦ì„œ (Let's Encrypt), Nginx ë¦¬ë²„ìŠ¤ í”„ë¡ì‹œ, Gunicorn ì—°ë™

### âœ… ì‹œìŠ¤í…œ ì •ë³´

| í•­ëª© | ì •ë³´ |
|------|------|
| ìš´ì˜ì²´ì œ | Ubuntu 22.04 (EC2) |
| ì›¹ì„œë²„ | Nginx |
| ë°±ì—”ë“œ | Django + Gunicorn |
| ë¸”ë¡œê·¸ | WordPress + PHP 8.3 |
| DB ì„œë²„ | MariaDB (MySQL í˜¸í™˜) |
| ë„ë©”ì¸ | https://mindevprofile.kr |

---

## 2ï¸âƒ£ ê¸°ì¡´ ìƒí™©ê³¼ ë¬¸ì œì 

- DjangoëŠ” ì´ë¯¸ `/` ê²½ë¡œì—ì„œ **ì •ìƒ ì„œë¹„ìŠ¤ ì¤‘**
- WordPressë¥¼ `/blog/`ì— ì—°ê²°í•˜ë ¤ í–ˆì§€ë§Œ,
    - `/blog/wp-login.php` ì ‘ì† ì‹œ Djangoê°€ ëª¨ë“  URLì„ ê°€ë¡œì±„ **404 ì˜¤ë¥˜**
- `.htaccess` íŒŒì¼ì´ **Nginxì—ì„œëŠ” ë¬´ì‹œë˜ê¸° ë•Œë¬¸ì—** ìë™ ë¦¬ë””ë ‰ì…˜ ë¶ˆê°€

---

## 3ï¸âƒ£ Nginx ì„¤ì • ì „ëµ

### ğŸ’¡ í•µì‹¬ ì „ëµ
`/blog/`ëŠ” WordPressë¡œ ë„˜ê¸°ê³ , ë‚˜ë¨¸ì§€ëŠ” Djangoì—ì„œ ì²˜ë¦¬

```nginx
server {
    listen 80;
    server_name mindevprofile.kr www.mindevprofile.kr;

    location /blog/ {
        alias /var/www/html/wordpress/;
        index index.php index.html;
        try_files $uri $uri/ /index.php?$args;

        location ~ \.php$ {
            include snippets/fastcgi-php.conf;
            fastcgi_pass unix:/run/php/php8.3-fpm.sock;
            fastcgi_param SCRIPT_FILENAME $request_filename;
        }
    }

    location / {
        proxy_pass http://127.0.0.1:8000;
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header X-Forwarded-Proto $scheme;
    }
}
```

---

## 4ï¸âƒ£ ì£¼ìš” ì„¤ì • íŒŒì¼ ê²½ë¡œ

| ì„¤ì • í•­ëª© | ê²½ë¡œ |
|-----------|------|
| Nginx ì„¤ì • | `/etc/nginx/sites-available/default` |
| WordPress ê²½ë¡œ | `/var/www/html/wordpress` |
| Django í”„ë¡œì íŠ¸ | `/home/ubuntu/gomgom-ai` |
| ê°€ìƒí™˜ê²½ | `/home/ubuntu/venv` |

---

## 5ï¸âƒ£ ì˜¤ë¥˜ ë°œìƒ & í•´ê²° ê¸°ë¡

### âš ï¸ 5-1. HTTPS ì ‘ì† ì‹œ `ERR_CONNECTION_REFUSED`
- **ì›ì¸:** `443` í¬íŠ¸ ë¯¸ì—´ë¦¼ + SSL ì¸ì¦ì„œ ì„¤ì • ì•ˆë¨
- âœ… **í•´ê²°:** `listen 443 ssl;` ì¶”ê°€, ì¸ì¦ì„œ ê²½ë¡œ ì§€ì •

---

### âš ï¸ 5-2. `/blog/` ê²½ë¡œ 403 Forbidden
- **ì›ì¸:** Nginx alias ê²½ë¡œ ê¶Œí•œ ì˜¤ë¥˜
- âœ… **í•´ê²°:** WordPress í´ë” ê¶Œí•œ ì ê²€ ë° ì•„ë˜ ì„¤ì • ì ìš©

```nginx
location /blog/ {
    alias /var/www/html/wordpress/;
    index index.php;
    try_files $uri $uri/ /index.php?$args;

    location ~ \.php$ {
        include snippets/fastcgi-php.conf;
        fastcgi_pass unix:/run/php/php8.3-fpm.sock;
        fastcgi_param SCRIPT_FILENAME $request_filename;
    }
}
```

---

### âš ï¸ 5-3. WordPress ë¡œê·¸ì¸ í›„ 404 (`/wp-login.php`)
- **ì›ì¸:** Djangoê°€ ë£¨íŠ¸ URL ì „ì²´ë¥¼ ì²˜ë¦¬
- âœ… **í•´ê²°:** WordPressëŠ” **`/blog/wp-login.php`** ë¡œ ì ‘ê·¼í•˜ë„ë¡ ê³ ì •

---

### âš ï¸ 5-4. Nginx `conflicting server name` ê²½ê³ 
- **ì›ì¸:** ì—¬ëŸ¬ ë¸”ë¡ì—ì„œ ë™ì¼í•œ `server_name` ì‚¬ìš©
- âœ… **í•´ê²°:** ì„œë²„ ë¸”ë¡ ì •ë¦¬

---

### âš ï¸ 5-5. Django ì‹¤í–‰ ì‹œ `ModuleNotFoundError: No module named 'django'`
- **ì›ì¸:** ê°€ìƒí™˜ê²½ ë¹„í™œì„±í™” or Django ë¯¸ì„¤ì¹˜
- âœ… **í•´ê²°:**

```bash
source venv/bin/activate
pip install django
```

---

### âš ï¸ 5-6. Gunicorn ì‹¤í–‰ì€ ë˜ë‚˜ Django 404 ë°œìƒ
- **ì›ì¸:** `ALLOWED_HOSTS` ë¯¸ì„¤ì •, `proxy_pass` ì˜¤ë¥˜
- âœ… **í•´ê²°:**

```python
# settings.py
ALLOWED_HOSTS = ['mindevprofile.kr', 'www.mindevprofile.kr']
```

```nginx
location / {
    proxy_pass http://127.0.0.1:8000;
}
```

---

### âš ï¸ 5-7. DB ê³„ì • ì •ë³´ ë¶„ì‹¤
- âœ… **í•´ê²°:**

```sql
CREATE USER 'wpuser'@'localhost' IDENTIFIED BY 'ë¹„ë°€ë²ˆí˜¸';
GRANT ALL PRIVILEGES ON wordpress.* TO 'wpuser'@'localhost';
FLUSH PRIVILEGES;
```

`wp-config.php`ì— í•´ë‹¹ ì •ë³´ ë°˜ì˜

---

## 6ï¸âƒ£ WordPress ì„¤ì¹˜ ì§„í–‰

- ê¸°ì¡´ DBê°€ ìˆì–´ â€œì´ë¯¸ ì„¤ì¹˜ë¨â€ ë©”ì‹œì§€ ì¶œë ¥
- `/blog/wp-login.php`ì—ì„œ ë¡œê·¸ì¸ ì„±ê³µ í™•ì¸
- ê´€ë¦¬ì ëŒ€ì‹œë³´ë“œ ì ‘ì† ì„±ê³µ
- Djangoì™€ WordPressê°€ **ì •ìƒ ë¶„ë¦¬ ìš´ì˜ í™•ì¸**

---

## âœ… ìµœì¢… í™•ì¸ í•­ëª©

| ê²½ë¡œ | ê²°ê³¼ |
|------|------|
| `https://mindevprofile.kr/` | Django í™ˆ (`Hello, Gomgom!`) |
| `https://mindevprofile.kr/blog/` | WordPress ë¸”ë¡œê·¸ ì •ìƒ ì¶œë ¥ |
| `https://mindevprofile.kr/blog/wp-login.php` | ë¡œê·¸ì¸ ì„±ê³µ |
| `.php` ìš”ì²­ | PHP-FPMìœ¼ë¡œ ì •ìƒ ì²˜ë¦¬ |
| ê¸°íƒ€ ìš”ì²­ | Djangoë¡œ ì²˜ë¦¬ë¨ |

---

## ğŸ“ ë§ˆë¬´ë¦¬ ë©”ëª¨

- `alias`ì™€ `root`ì˜ ì°¨ì´ ë°˜ë“œì‹œ ì´í•´í•  ê²ƒ
- `location /blog/`ì²˜ëŸ¼ **ê²½ë¡œ ëì— ìŠ¬ë˜ì‹œ(/)** í¬í•¨í•´ì•¼ aliasê°€ ì œëŒ€ë¡œ ì‘ë™í•¨
- Nginx ì„¤ì • ë³€ê²½ í›„ í•­ìƒ `nginx -t` â†’ `sudo systemctl reload nginx` ìˆ˜í–‰

---

ğŸ’¡ ë‹¤ìŒ í•  ì¼:
- Djangoì™€ WordPress ëª¨ë‘ ì •ì  íŒŒì¼ ê²½ë¡œ ì ê²€
- SEO ë° ë³´ì•ˆ í—¤ë” ì„¤ì • ì¶”ê°€
- ìë™ ë°±ì—… ë° crontab êµ¬ì„±
